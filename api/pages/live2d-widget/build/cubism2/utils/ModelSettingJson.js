{"title":"","type":"page","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":"import { Live2DFramework } from '../Live2DFramework.js'; class ModelSettingJson { constructor() { this.NAME = 'name'; this.ID = 'id'; this.M...","date":"2025-11-18T04:43:50.319Z","updated":"2025-11-18T04:43:50.319Z","comments":true,"path":"api/pages/live2d-widget/build/cubism2/utils/ModelSettingJson.js","covers":null,"content":"import { Live2DFramework } from '../Live2DFramework.js';\nclass ModelSettingJson {\n    constructor() {\n        this.NAME = 'name';\n        this.ID = 'id';\n        this.MODEL = 'model';\n        this.TEXTURES = 'textures';\n        this.HIT_AREAS = 'hit_areas';\n        this.HIT_AREAS_CUSTOM = 'hit_areas_custom';\n        this.PHYSICS = 'physics';\n        this.POSE = 'pose';\n        this.EXPRESSIONS = 'expressions';\n        this.MOTION_GROUPS = 'motions';\n        this.SOUND = 'sound';\n        this.FADE_IN = 'fade_in';\n        this.FADE_OUT = 'fade_out';\n        this.LAYOUT = 'layout';\n        this.INIT_PARAM = 'init_param';\n        this.INIT_PARTS_VISIBLE = 'init_parts_visible';\n        this.VALUE = 'val';\n        this.FILE = 'file';\n        this.json = {};\n    }\n    loadModelSetting(path, callback) {\n        const pm = Live2DFramework.getPlatformManager();\n        pm.loadBytes(path, buf => {\n            const str = String.fromCharCode.apply(null, new Uint8Array(buf));\n            this.json = JSON.parse(str);\n            callback();\n        });\n    }\n    getTextureFile(n) {\n        if (this.json[this.TEXTURES] == null || this.json[this.TEXTURES][n] == null)\n            return null;\n        return this.json[this.TEXTURES][n];\n    }\n    getModelFile() {\n        return this.json[this.MODEL];\n    }\n    getTextureNum() {\n        if (this.json[this.TEXTURES] == null)\n            return 0;\n        return this.json[this.TEXTURES].length;\n    }\n    getHitAreaNum() {\n        if (this.json[this.HIT_AREAS] == null)\n            return 0;\n        return this.json[this.HIT_AREAS].length;\n    }\n    getHitAreaCustom() {\n        return this.json[this.HIT_AREAS_CUSTOM];\n    }\n    getHitAreaID(n) {\n        if (this.json[this.HIT_AREAS] == null ||\n            this.json[this.HIT_AREAS][n] == null)\n            return null;\n        return this.json[this.HIT_AREAS][n][this.ID];\n    }\n    getHitAreaName(n) {\n        if (this.json[this.HIT_AREAS] == null ||\n            this.json[this.HIT_AREAS][n] == null)\n            return null;\n        return this.json[this.HIT_AREAS][n][this.NAME];\n    }\n    getPhysicsFile() {\n        return this.json[this.PHYSICS];\n    }\n    getPoseFile() {\n        return this.json[this.POSE];\n    }\n    getExpressionNum() {\n        return this.json[this.EXPRESSIONS] == null\n            ? 0\n            : this.json[this.EXPRESSIONS].length;\n    }\n    getExpressionFile(n) {\n        if (this.json[this.EXPRESSIONS] == null)\n            return null;\n        return this.json[this.EXPRESSIONS][n][this.FILE];\n    }\n    getExpressionName(n) {\n        if (this.json[this.EXPRESSIONS] == null)\n            return null;\n        return this.json[this.EXPRESSIONS][n][this.NAME];\n    }\n    getLayout() {\n        return this.json[this.LAYOUT];\n    }\n    getInitParamNum() {\n        return this.json[this.INIT_PARAM] == null\n            ? 0\n            : this.json[this.INIT_PARAM].length;\n    }\n    getMotionNum(name) {\n        if (this.json[this.MOTION_GROUPS] == null ||\n            this.json[this.MOTION_GROUPS][name] == null)\n            return 0;\n        return this.json[this.MOTION_GROUPS][name].length;\n    }\n    getMotionFile(name, n) {\n        if (this.json[this.MOTION_GROUPS] == null ||\n            this.json[this.MOTION_GROUPS][name] == null ||\n            this.json[this.MOTION_GROUPS][name][n] == null)\n            return null;\n        return this.json[this.MOTION_GROUPS][name][n][this.FILE];\n    }\n    getMotionSound(name, n) {\n        if (this.json[this.MOTION_GROUPS] == null ||\n            this.json[this.MOTION_GROUPS][name] == null ||\n            this.json[this.MOTION_GROUPS][name][n] == null ||\n            this.json[this.MOTION_GROUPS][name][n][this.SOUND] == null)\n            return null;\n        return this.json[this.MOTION_GROUPS][name][n][this.SOUND];\n    }\n    getMotionFadeIn(name, n) {\n        if (this.json[this.MOTION_GROUPS] == null ||\n            this.json[this.MOTION_GROUPS][name] == null ||\n            this.json[this.MOTION_GROUPS][name][n] == null ||\n            this.json[this.MOTION_GROUPS][name][n][this.FADE_IN] == null)\n            return 1000;\n        return this.json[this.MOTION_GROUPS][name][n][this.FADE_IN];\n    }\n    getMotionFadeOut(name, n) {\n        if (this.json[this.MOTION_GROUPS] == null ||\n            this.json[this.MOTION_GROUPS][name] == null ||\n            this.json[this.MOTION_GROUPS][name][n] == null ||\n            this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT] == null)\n            return 1000;\n        return this.json[this.MOTION_GROUPS][name][n][this.FADE_OUT];\n    }\n    getInitParamID(n) {\n        if (this.json[this.INIT_PARAM] == null ||\n            this.json[this.INIT_PARAM][n] == null)\n            return null;\n        return this.json[this.INIT_PARAM][n][this.ID];\n    }\n    getInitParamValue(n) {\n        if (this.json[this.INIT_PARAM] == null ||\n            this.json[this.INIT_PARAM][n] == null)\n            return NaN;\n        return this.json[this.INIT_PARAM][n][this.VALUE];\n    }\n    getInitPartsVisibleNum() {\n        return this.json[this.INIT_PARTS_VISIBLE] == null\n            ? 0\n            : this.json[this.INIT_PARTS_VISIBLE].length;\n    }\n    getInitPartsVisibleID(n) {\n        if (this.json[this.INIT_PARTS_VISIBLE] == null ||\n            this.json[this.INIT_PARTS_VISIBLE][n] == null)\n            return null;\n        return this.json[this.INIT_PARTS_VISIBLE][n][this.ID];\n    }\n    getInitPartsVisibleValue(n) {\n        if (this.json[this.INIT_PARTS_VISIBLE] == null ||\n            this.json[this.INIT_PARTS_VISIBLE][n] == null)\n            return NaN;\n        return this.json[this.INIT_PARTS_VISIBLE][n][this.VALUE];\n    }\n}\nexport default ModelSettingJson;\n","count_time":{"symbolsCount":"5.7k","symbolsTime":"5 mins."},"toc":"","data":[]}