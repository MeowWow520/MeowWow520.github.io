{"title":"","type":"page","uid":"1cd19fc71517798e2fa5b7457d1fb06e","text":"import terser from '@rollup/plugin-terser'; import alias from '@rollup/plugin-alias'; import fs from 'fs'; import path from 'path'; import {...","date":"2025-11-18T04:43:50.342Z","updated":"2025-11-18T04:43:50.342Z","comments":true,"path":"api/pages/live2d-widget/rollup.config.js","covers":null,"content":"import terser from '@rollup/plugin-terser';\nimport alias from '@rollup/plugin-alias';\nimport fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\nfunction findCubismDir() {\n  const buildDir = path.join(__dirname, 'build');\n  let candidates = fs.readdirSync(buildDir)\n    .filter(f => f.startsWith('CubismSdkForWeb-') && fs.statSync(path.join(buildDir, f)).isDirectory());\n  if (candidates.length === 0) {\n    candidates = ['CubismSdkForWeb-5-r.4'];\n  }\n  return path.join(buildDir, candidates[0]);\n}\n\nconst cubismDir = findCubismDir();\n\nexport default {\n  input: 'build/waifu-tips.js',\n  output: {\n    dir: 'dist/',\n    format: 'esm',\n    chunkFileNames: 'chunk/[name].js',\n    sourcemap: true,\n    banner: `/*!\n * Live2D Widget\n * https://github.com/stevenjoezhang/live2d-widget\n */\n`\n  },\n  plugins: [\n    alias({\n      entries: [\n        {\n          find: '@demo',\n          replacement: path.resolve(cubismDir, 'Samples/TypeScript/Demo/src/')\n        },\n        {\n          find: '@framework',\n          replacement: path.resolve(cubismDir, 'Framework/src/')\n        }\n      ]\n    }),\n    terser(),\n  ],\n  context: 'this',\n};\n","count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"toc":"","data":[]}